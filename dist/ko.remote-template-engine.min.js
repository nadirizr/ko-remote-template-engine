/*! ko.remote-template-engine - v1.0.2 - 2015-04-05
* Copyright (c) 2015 ; Licensed  */
!function(a,b){"function"==typeof define&&define.amd?define(["knockout"],function(a){return b(a)}):b(a.ko)}(this,function(a){var b=function(a){return a&&a.replace(/\/?$/,"/")},c=new a.nativeTemplateEngine,d={};c.defaultPath="templates",c.defaultExtraPaths=[],c.defaultSuffix=".tmpl.html",c.defaultUseCache=!0,c.ajax=function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&(200===b.status?a.success(b.responseText):404===b.status&&a.error(b))},b.open("GET",a.url,!0),b.send(null)},a.templateSources.remoteTemplate=function(b){this.key=b,this.template=a.observable(" "),this.requested=!1,this.retrieved=!1},a.templateSources.remoteTemplate.prototype.text=function(){var a=function(d,e){if(!this.requested&&this.key){var f=[b(d)+this.key+c.defaultSuffix+(c.defaultUseCache?"":"?timestamp="+(new Date).getTime())].join("");c.ajax({url:f,success:function(a){this.retrieved=!0,this.template(a)}.bind(this),error:function(){e&&e.length>0&&(this.requested=!1,a(e[0],e.slice(1)))}.bind(this)}),c.defaultUseCache&&(this.requested=!0)}}.bind(this);return a(c.defaultPath,c.defaultExtraPaths),this.key||this.template(""),0===arguments.length?this.template():void 0},c.makeTemplateSource=function(b,c){var e;return"string"==typeof b?(e=(c||document).getElementById(b),e&&"script"===e.tagName.toLowerCase()?new a.templateSources.domElement(e):(b in d||(d[b]=new a.templateSources.remoteTemplate(b)),d[b])):!b||1!==b.nodeType&&8!==b.nodeType?void 0:new a.templateSources.anonymousTemplate(b)},c.renderTemplate=function(b,d,e,f){var g=c.makeTemplateSource(b,f),h=e&&e.afterRender;return"function"==typeof h&&g instanceof a.templateSources.remoteTemplate&&!g.retrieved&&(e.afterRender=function(){g.retrieved&&h.apply(this,arguments)}),c.renderTemplateSource(g,d,e)},a.remoteTemplateEngine=c,a.setTemplateEngine(c)});